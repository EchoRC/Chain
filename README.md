# Chain
本项目是根据区块链信息模拟的登陆。目前是java语言，后续会有python语言实现。
根据区块链原理实现分布式数据存储，通过区块链编码技术实现数据加密，数据传递，预构下多个场景应用。
存储模块：Block内存储的是类Sql语句。预先设定好符合业务场景需要的数据库表结构，然后设定好各个节点对表的操作权限（ADD，UPDATE，DELETE），将来各个节点就可以按照自己被允许的权限，进行Sql语句的编写，并打包至Block中，再全网广播，等待全网校验签名、权限等信息的合法性。如果Block合法，则允许生成，生成后再全网广播，各节点拉取新区块。新区块生成后，各节点进行区块内容解析，并落地入库的操作。
网络广播：网络层，采用的是各节点互相长连接、断线重连，然后维持心跳包。网络框架使用的是t-io，也是oschina的知名开源项目。t-io采用了AIO的方式，在大量长连接情况下性能优异，资源占用也很少，并且包含了心跳包、断线重连、retry等优秀功能。在项目中，每个节点即是server，又是client，作为server则被其他的N-1个节点连接，作为client则去连接其他N-1个节点的server。
共识算法：修改pbft算法，设定各个节点是平等的，而且性能要高，不需要选择leader，任何节点都可以构建Block，然后全网广播。其他节点收到该Block请求时即进入Pre-Prepare状态，校验格式、hash、签名、和table的权限，校验通过后，进入Prepare状态，并全网广播状态。待自己累积的各节点Prepare的数量大于2f+1时，进入commit状态，并全网广播该状态。待自己累积的各节点Commit的数量大于2f+1时，认为已达成共识，将Block加入区块链中，然后执行Block中sql语句，进行数据入库。
对区块信息查询，只需要查询数据库即可，提高了效率。



This project is based on blockchain information simulation landing. Currently it is java language. Follow-up will be implemented in python language. According to the principle of blockchain, distributed data storage is realized, and data encryption and data transmission are realized through blockchain coding technology, and multiple scenarios are pre-constructed. Storage module: Stored within the Block is a Sql statement. Set the database table structure that meets the needs of the business scenario in advance, and then set the operation permission (ADD, UPDATE, DELETE) of each node to the table. In the future, each node can perform the Sql statement preparation according to its permission. And packaged into the Block, and then broadcast the entire network, waiting for the entire network to verify the validity of the signature, permissions and other information. If the Block is valid, it is allowed to generate, and then the network-wide broadcast is generated and each node pulls a new block. After the new block is generated, each node analyzes the content of the block and performs the operation of loading and unloading the block. Webcast: At the network layer, each node is connected to each other and disconnected, and then the heartbeat packet is maintained. The network framework uses t-io and is also a well-known open source project of oschina. T-io adopts the AIO method and has excellent performance in a large number of long-term connections, and it also consumes very little resources. It also includes excellent features such as heartbeat packets, disconnected reconnection, and retry. In the project, each node is a server and a client. As a server, it is connected to other N-1 nodes, and as a client, it is connected to the servers of other N-1 nodes. Consensus algorithm: Modify the pbft algorithm, set each node to be equal, and the performance is higher. You don't need to select the leader. Any node can build Block, and then broadcast on the entire network. When other nodes receive the Block request, they enter the Pre-Prepare state, check the format, hash, signature, and table permissions. After the check passes, they enter the Prepare state and broadcast to the entire network. When the number of Prepare nodes to be accumulated by itself is greater than 2f+1, the commit state is entered, and the entire network broadcasts this state. When the number of Commit nodes to be accumulated by itself is greater than 2f+1, it is considered that a consensus has been reached that the block is added to the block chain, and then the sql statement in the block is executed to store the data. For querying block information, you only need to query the database, which improves efficiency.
